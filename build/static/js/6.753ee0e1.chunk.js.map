{"version":3,"sources":["../node_modules/echarts/lib/chart/helper/Symbol.js","../node_modules/echarts/lib/chart/line/helper.js","../node_modules/echarts/lib/chart/line.js","../node_modules/echarts/lib/chart/line/LineSeries.js","../node_modules/echarts/lib/chart/line/LineView.js","../node_modules/echarts/lib/chart/helper/SymbolDraw.js","../node_modules/echarts/lib/chart/line/lineAnimationDiff.js","../node_modules/echarts/lib/chart/line/poly.js","../node_modules/echarts/lib/visual/symbol.js","../node_modules/echarts/lib/layout/points.js","../node_modules/echarts/lib/processor/dataSample.js"],"names":["zrUtil","createSymbol","graphic","parsePercent","getDefaultLabel","SymbolClz","data","idx","seriesScope","Group","call","this","updateData","symbolProto","prototype","getSymbolSize","symbolSize","getItemVisual","Array","slice","getScale","driftSymbol","dx","dy","parent","drift","_createSymbol","symbolType","keepAspect","removeAll","color","symbolPath","attr","z2","culling","scale","_symbolType","add","stopSymbolAnimation","toLastFrame","childAt","stopAnimation","getSymbolPath","highlight","trigger","downplay","setZ","zlevel","z","setDraggable","draggable","cursor","silent","seriesModel","hostModel","isInit","updateProps","_updateCommon","fadeIn","target","style","opacity","initProps","_seriesModel","normalStyleAccessPath","emphasisStyleAccessPath","normalLabelAccessPath","emphasisLabelAccessPath","highDownOnUpdate","fromState","toState","incremental","useHoverLayer","__symbolOriginalScale","ratio","emphasisOpt","Math","max","animateTo","type","useStyle","strokeNoScale","itemStyle","hoverItemStyle","symbolRotate","symbolOffset","labelModel","hoverLabelModel","hoverAnimation","cursorStyle","hasItemOption","itemModel","getItemModel","getModel","getItemStyle","getShallow","extend","elStyle","PI","setColor","symbolInnerColor","setStyle","liftZ","z2Origin","__z2Origin","useNameLabel","setLabelStyle","labelFetcher","labelDataIndex","defaultText","opt","getName","isRectText","autoColor","hoverStyle","isAnimationEnabled","setHoverStyle","fadeOut","cb","keepLabel","text","dataIndex","inherits","_default","module","exports","isDimensionStacked","map","prepareDataCoordInfo","coordSys","valueOrigin","stacked","baseAxis","getBaseAxis","valueAxis","getOtherAxis","valueStart","extent","getExtent","getValueStart","baseAxisDim","dim","valueAxisDim","valueDim","mapDimension","baseDim","baseDataOffset","dims","dimensions","coordDim","stackResultDim","getCalculationInfo","dataDimsForPoint","stackedOverDimension","getStackedOnPoint","dataCoordInfo","value","NaN","get","isNaN","stackedData","dataToPoint","echarts","visualSymbol","layoutPoints","dataSample","registerVisual","registerLayout","registerProcessor","PRIORITY","PROCESSOR","STATISTIC","__DEV__","createListFromArray","dependencies","getInitialData","option","ecModel","getSource","defaultOption","coordinateSystem","legendHoverLink","clipOverflow","label","position","lineStyle","width","step","smooth","smoothMonotone","symbol","showSymbol","showAllSymbol","connectNulls","sampling","animationEasing","progressive","hoverLayerThreshold","Infinity","SymbolDraw","lineAnimationDiff","modelUtil","_poly","Polyline","Polygon","ChartView","round","_helper","isPointsSame","points1","points2","length","i","p1","p2","getSmooth","getAxisExtentWithGap","axis","getGlobalExtent","onBand","halfBandWidth","getBandWidth","dir","createClipShape","hasAnimation","forSymbol","polar","angleAxis","getAngleAxis","radiusExtent","getRadiusAxis","reverse","angleExtent","RADIAN","clipPath","Sector","shape","cx","cy","r0","r","startAngle","endAngle","clockwise","inverse","createPolarClipShape","cartesian","xExtent","getAxis","yExtent","isHorizontal","x","min","y","height","lineWidth","expandSize","Rect","createGridClipShape","turnPointsIntoStep","points","stepTurnAt","baseIndex","stepPoints","nextPt","pt","push","stepPt","middle","stepPt2","getIsIgnoreFunc","isAuto","categoryAxis","getAxesByScale","axisExtent","availSize","abs","count","dataLen","canShowAllSymbolForCategory","categoryDataDim","labelMap","each","getViewLabels","labelItem","tickValue","hasOwnProperty","init","lineGroup","symbolDraw","group","_symbolDraw","_lineGroup","render","api","getData","lineStyleModel","areaStyleModel","mapArray","getItemLayout","isCoordSysPolar","prevCoordSys","_coordSys","polyline","_polyline","polygon","_polygon","isAreaChart","isEmpty","stackedOnPoints","len","getStackedOnPoints","isIgnoreFunc","oldData","_data","eachItemGraphicEl","el","__temp","remove","setItemGraphicEl","_step","_newPolygon","setClipPath","isIgnore","clipShape","_stackedOnPoints","_points","_updateAnimation","setShape","_newPolyline","visualColor","visualMetaList","getVisual","visualMeta","dimIndex","dimension","dimName","dimInfo","getDimensionInfo","colorStops","stops","stop","coord","toGlobalCoord","dataToCoord","stopLen","outerColors","minCoord","maxCoord","coordSpan","offset","unshift","gradient","LinearGradient","getVisualGradient","defaults","getLineStyle","fill","stroke","lineJoin","stackedOnSeries","stackedOnSmooth","getAreaStyle","_valueOrigin","dispose","payload","queryDataIndex","getItemGraphicEl","ignore","diff","current","stackedOnCurrent","next","stackedOnNext","__points","updatedDataInfo","diffStatus","status","cmd","idx1","ptIdx","animators","during","isObject","symbolCtor","_symbolCtor","symbolDrawProto","symbolNeedsDraw","point","contain","normalizeUpdateOpt","makeSeriesScope","SymbolCtor","newIdx","symbolEl","update","oldIdx","execute","isPersistent","updateLayout","incrementalPrepareUpdate","_seriesScope","incrementalUpdate","taskParams","updateIncrementalAndHover","isGroup","start","end","traverse","enableAnimation","newData","oldStackedOnPoints","newStackedOnPoints","oldCoordSys","newCoordSys","oldValueOrigin","newValueOrigin","diffResult","diffData","currPoints","nextPoints","currStackedPoints","nextStackedPoints","sortedIndices","rawIndices","newDataOldCoordInfo","oldDataNewCoordInfo","diffItem","pointAdded","currentPt","getRawIndex","rawIndex","sort","a","b","sortedCurrPoints","sortedNextPoints","sortedCurrStackedPoints","sortedNextStackedPoints","sortedStatus","Path","vec2","fixClipWithShadow","vec2Min","vec2Max","scaleAndAdd","v2Copy","copy","v","cp0","cp1","isPointNull","p","drawSegment","ctx","segLen","allLen","smoothMin","smoothMax","drawMono","apply","arguments","drawNonMono","prevIdx","k","prevP","ctrlLen","bezierCurveTo","lineTo","nextIdx","nextP","ratioNextSeg","lenPrevSeg","lenNextSeg","sub","dist","getBoundingBox","smoothConstraint","ptMin","ptMax","brush","buildPath","result","bbox","stackedOnBBox","closePath","isFunction","seriesType","defaultSymbolType","legendSymbol","performRawSeries","reset","hasSymbolTypeCallback","hasSymbolSizeCallback","hasCallback","seriesSymbol","seriesSymbolSize","setVisual","symbolKeepAspect","isSeriesFiltered","dataEach","rawValue","getRawValue","params","getDataParams","setItemVisual","itemSymbolType","itemSymbolSize","itemSymbolKeepAspect","createRenderPlanner","plan","isLargeRender","pipelineContext","large","dimLen","progress","segCount","Float32Array","tmpIn","tmpOut","setItemLayout","setLayout","samplers","average","frame","sum","isFinite","nearest","indexSampler","modifyOutputEnd","sampler","size","rate","setData","downSample"],"mappings":"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","file":"static/js/6.753ee0e1.chunk.js","sourcesContent":["/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar _labelHelper = require(\"./labelHelper\");\n\nvar getDefaultLabel = _labelHelper.getDefaultLabel;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/chart/helper/Symbol\n */\n\n/**\n * @constructor\n * @alias {module:echarts/chart/helper/Symbol}\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @extends {module:zrender/graphic/Group}\n */\n\nfunction SymbolClz(data, idx, seriesScope) {\n  graphic.Group.call(this);\n  this.updateData(data, idx, seriesScope);\n}\n\nvar symbolProto = SymbolClz.prototype;\n/**\n * @public\n * @static\n * @param {module:echarts/data/List} data\n * @param {number} dataIndex\n * @return {Array.<number>} [width, height]\n */\n\nvar getSymbolSize = SymbolClz.getSymbolSize = function (data, idx) {\n  var symbolSize = data.getItemVisual(idx, 'symbolSize');\n  return symbolSize instanceof Array ? symbolSize.slice() : [+symbolSize, +symbolSize];\n};\n\nfunction getScale(symbolSize) {\n  return [symbolSize[0] / 2, symbolSize[1] / 2];\n}\n\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\n\nsymbolProto._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\n  // Remove paths created before\n  this.removeAll();\n  var color = data.getItemVisual(idx, 'color'); // var symbolPath = createSymbol(\n  //     symbolType, -0.5, -0.5, 1, 1, color\n  // );\n  // If width/height are set too small (e.g., set to 1) on ios10\n  // and macOS Sierra, a circle stroke become a rect, no matter what\n  // the scale is set. So we set width/height as 2. See #4150.\n\n  var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, color, keepAspect);\n  symbolPath.attr({\n    z2: 100,\n    culling: true,\n    scale: getScale(symbolSize)\n  }); // Rewrite drift method\n\n  symbolPath.drift = driftSymbol;\n  this._symbolType = symbolType;\n  this.add(symbolPath);\n};\n/**\n * Stop animation\n * @param {boolean} toLastFrame\n */\n\n\nsymbolProto.stopSymbolAnimation = function (toLastFrame) {\n  this.childAt(0).stopAnimation(toLastFrame);\n};\n/**\n * FIXME:\n * Caution: This method breaks the encapsulation of this module,\n * but it indeed brings convenience. So do not use the method\n * unless you detailedly know all the implements of `Symbol`,\n * especially animation.\n *\n * Get symbol path element.\n */\n\n\nsymbolProto.getSymbolPath = function () {\n  return this.childAt(0);\n};\n/**\n * Get scale(aka, current symbol size).\n * Including the change caused by animation\n */\n\n\nsymbolProto.getScale = function () {\n  return this.childAt(0).scale;\n};\n/**\n * Highlight symbol\n */\n\n\nsymbolProto.highlight = function () {\n  this.childAt(0).trigger('emphasis');\n};\n/**\n * Downplay symbol\n */\n\n\nsymbolProto.downplay = function () {\n  this.childAt(0).trigger('normal');\n};\n/**\n * @param {number} zlevel\n * @param {number} z\n */\n\n\nsymbolProto.setZ = function (zlevel, z) {\n  var symbolPath = this.childAt(0);\n  symbolPath.zlevel = zlevel;\n  symbolPath.z = z;\n};\n\nsymbolProto.setDraggable = function (draggable) {\n  var symbolPath = this.childAt(0);\n  symbolPath.draggable = draggable;\n  symbolPath.cursor = draggable ? 'move' : symbolPath.cursor;\n};\n/**\n * Update symbol properties\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Object} [seriesScope]\n * @param {Object} [seriesScope.itemStyle]\n * @param {Object} [seriesScope.hoverItemStyle]\n * @param {Object} [seriesScope.symbolRotate]\n * @param {Object} [seriesScope.symbolOffset]\n * @param {module:echarts/model/Model} [seriesScope.labelModel]\n * @param {module:echarts/model/Model} [seriesScope.hoverLabelModel]\n * @param {boolean} [seriesScope.hoverAnimation]\n * @param {Object} [seriesScope.cursorStyle]\n * @param {module:echarts/model/Model} [seriesScope.itemModel]\n * @param {string} [seriesScope.symbolInnerColor]\n * @param {Object} [seriesScope.fadeIn=false]\n */\n\n\nsymbolProto.updateData = function (data, idx, seriesScope) {\n  this.silent = false;\n  var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n  var seriesModel = data.hostModel;\n  var symbolSize = getSymbolSize(data, idx);\n  var isInit = symbolType !== this._symbolType;\n\n  if (isInit) {\n    var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n\n    this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\n  } else {\n    var symbolPath = this.childAt(0);\n    symbolPath.silent = false;\n    graphic.updateProps(symbolPath, {\n      scale: getScale(symbolSize)\n    }, seriesModel, idx);\n  }\n\n  this._updateCommon(data, idx, symbolSize, seriesScope);\n\n  if (isInit) {\n    var symbolPath = this.childAt(0);\n    var fadeIn = seriesScope && seriesScope.fadeIn;\n    var target = {\n      scale: symbolPath.scale.slice()\n    };\n    fadeIn && (target.style = {\n      opacity: symbolPath.style.opacity\n    });\n    symbolPath.scale = [0, 0];\n    fadeIn && (symbolPath.style.opacity = 0);\n    graphic.initProps(symbolPath, target, seriesModel, idx);\n  }\n\n  this._seriesModel = seriesModel;\n}; // Update common properties\n\n\nvar normalStyleAccessPath = ['itemStyle'];\nvar emphasisStyleAccessPath = ['emphasis', 'itemStyle'];\nvar normalLabelAccessPath = ['label'];\nvar emphasisLabelAccessPath = ['emphasis', 'label'];\n/**\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Array.<number>} symbolSize\n * @param {Object} [seriesScope]\n */\n\nsymbolProto._updateCommon = function (data, idx, symbolSize, seriesScope) {\n  var symbolPath = this.childAt(0);\n  var seriesModel = data.hostModel;\n  var color = data.getItemVisual(idx, 'color'); // Reset style\n\n  if (symbolPath.type !== 'image') {\n    symbolPath.useStyle({\n      strokeNoScale: true\n    });\n  }\n\n  var itemStyle = seriesScope && seriesScope.itemStyle;\n  var hoverItemStyle = seriesScope && seriesScope.hoverItemStyle;\n  var symbolRotate = seriesScope && seriesScope.symbolRotate;\n  var symbolOffset = seriesScope && seriesScope.symbolOffset;\n  var labelModel = seriesScope && seriesScope.labelModel;\n  var hoverLabelModel = seriesScope && seriesScope.hoverLabelModel;\n  var hoverAnimation = seriesScope && seriesScope.hoverAnimation;\n  var cursorStyle = seriesScope && seriesScope.cursorStyle;\n\n  if (!seriesScope || data.hasItemOption) {\n    var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx); // Color must be excluded.\n    // Because symbol provide setColor individually to set fill and stroke\n\n    itemStyle = itemModel.getModel(normalStyleAccessPath).getItemStyle(['color']);\n    hoverItemStyle = itemModel.getModel(emphasisStyleAccessPath).getItemStyle();\n    symbolRotate = itemModel.getShallow('symbolRotate');\n    symbolOffset = itemModel.getShallow('symbolOffset');\n    labelModel = itemModel.getModel(normalLabelAccessPath);\n    hoverLabelModel = itemModel.getModel(emphasisLabelAccessPath);\n    hoverAnimation = itemModel.getShallow('hoverAnimation');\n    cursorStyle = itemModel.getShallow('cursor');\n  } else {\n    hoverItemStyle = zrUtil.extend({}, hoverItemStyle);\n  }\n\n  var elStyle = symbolPath.style;\n  symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n\n  if (symbolOffset) {\n    symbolPath.attr('position', [parsePercent(symbolOffset[0], symbolSize[0]), parsePercent(symbolOffset[1], symbolSize[1])]);\n  }\n\n  cursorStyle && symbolPath.attr('cursor', cursorStyle); // PENDING setColor before setStyle!!!\n\n  symbolPath.setColor(color, seriesScope && seriesScope.symbolInnerColor);\n  symbolPath.setStyle(itemStyle);\n  var opacity = data.getItemVisual(idx, 'opacity');\n\n  if (opacity != null) {\n    elStyle.opacity = opacity;\n  }\n\n  var liftZ = data.getItemVisual(idx, 'liftZ');\n  var z2Origin = symbolPath.__z2Origin;\n\n  if (liftZ != null) {\n    if (z2Origin == null) {\n      symbolPath.__z2Origin = symbolPath.z2;\n      symbolPath.z2 += liftZ;\n    }\n  } else if (z2Origin != null) {\n    symbolPath.z2 = z2Origin;\n    symbolPath.__z2Origin = null;\n  }\n\n  var useNameLabel = seriesScope && seriesScope.useNameLabel;\n  graphic.setLabelStyle(elStyle, hoverItemStyle, labelModel, hoverLabelModel, {\n    labelFetcher: seriesModel,\n    labelDataIndex: idx,\n    defaultText: getLabelDefaultText,\n    isRectText: true,\n    autoColor: color\n  }); // Do not execute util needed.\n\n  function getLabelDefaultText(idx, opt) {\n    return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n  }\n\n  symbolPath.__symbolOriginalScale = getScale(symbolSize);\n  symbolPath.hoverStyle = hoverItemStyle;\n  symbolPath.highDownOnUpdate = hoverAnimation && seriesModel.isAnimationEnabled() ? highDownOnUpdate : null;\n  graphic.setHoverStyle(symbolPath);\n};\n\nfunction highDownOnUpdate(fromState, toState) {\n  // Do not support this hover animation util some scenario required.\n  // Animation can only be supported in hover layer when using `el.incremetal`.\n  if (this.incremental || this.useHoverLayer) {\n    return;\n  }\n\n  if (toState === 'emphasis') {\n    var scale = this.__symbolOriginalScale;\n    var ratio = scale[1] / scale[0];\n    var emphasisOpt = {\n      scale: [Math.max(scale[0] * 1.1, scale[0] + 3), Math.max(scale[1] * 1.1, scale[1] + 3 * ratio)]\n    }; // FIXME\n    // modify it after support stop specified animation.\n    // toState === fromState\n    //     ? (this.stopAnimation(), this.attr(emphasisOpt))\n\n    this.animateTo(emphasisOpt, 400, 'elasticOut');\n  } else if (toState === 'normal') {\n    this.animateTo({\n      scale: this.__symbolOriginalScale\n    }, 400, 'elasticOut');\n  }\n}\n/**\n * @param {Function} cb\n * @param {Object} [opt]\n * @param {Object} [opt.keepLabel=true]\n */\n\n\nsymbolProto.fadeOut = function (cb, opt) {\n  var symbolPath = this.childAt(0); // Avoid mistaken hover when fading out\n\n  this.silent = symbolPath.silent = true; // Not show text when animating\n\n  !(opt && opt.keepLabel) && (symbolPath.style.text = null);\n  graphic.updateProps(symbolPath, {\n    style: {\n      opacity: 0\n    },\n    scale: [0, 0]\n  }, this._seriesModel, this.dataIndex, cb);\n};\n\nzrUtil.inherits(SymbolClz, graphic.Group);\nvar _default = SymbolClz;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _dataStackHelper = require(\"../../data/helper/dataStackHelper\");\n\nvar isDimensionStacked = _dataStackHelper.isDimensionStacked;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar map = _util.map;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {Object} coordSys\n * @param {module:echarts/data/List} data\n * @param {string} valueOrigin lineSeries.option.areaStyle.origin\n */\n\nfunction prepareDataCoordInfo(coordSys, data, valueOrigin) {\n  var baseAxis = coordSys.getBaseAxis();\n  var valueAxis = coordSys.getOtherAxis(baseAxis);\n  var valueStart = getValueStart(valueAxis, valueOrigin);\n  var baseAxisDim = baseAxis.dim;\n  var valueAxisDim = valueAxis.dim;\n  var valueDim = data.mapDimension(valueAxisDim);\n  var baseDim = data.mapDimension(baseAxisDim);\n  var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n  var dims = map(coordSys.dimensions, function (coordDim) {\n    return data.mapDimension(coordDim);\n  });\n  var stacked;\n  var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n  if (stacked |= isDimensionStacked(data, dims[0]\n  /*, dims[1]*/\n  )) {\n    // jshint ignore:line\n    dims[0] = stackResultDim;\n  }\n\n  if (stacked |= isDimensionStacked(data, dims[1]\n  /*, dims[0]*/\n  )) {\n    // jshint ignore:line\n    dims[1] = stackResultDim;\n  }\n\n  return {\n    dataDimsForPoint: dims,\n    valueStart: valueStart,\n    valueAxisDim: valueAxisDim,\n    baseAxisDim: baseAxisDim,\n    stacked: !!stacked,\n    valueDim: valueDim,\n    baseDim: baseDim,\n    baseDataOffset: baseDataOffset,\n    stackedOverDimension: data.getCalculationInfo('stackedOverDimension')\n  };\n}\n\nfunction getValueStart(valueAxis, valueOrigin) {\n  var valueStart = 0;\n  var extent = valueAxis.scale.getExtent();\n\n  if (valueOrigin === 'start') {\n    valueStart = extent[0];\n  } else if (valueOrigin === 'end') {\n    valueStart = extent[1];\n  } // auto\n  else {\n      // Both positive\n      if (extent[0] > 0) {\n        valueStart = extent[0];\n      } // Both negative\n      else if (extent[1] < 0) {\n          valueStart = extent[1];\n        } // If is one positive, and one negative, onZero shall be true\n\n    }\n\n  return valueStart;\n}\n\nfunction getStackedOnPoint(dataCoordInfo, coordSys, data, idx) {\n  var value = NaN;\n\n  if (dataCoordInfo.stacked) {\n    value = data.get(data.getCalculationInfo('stackedOverDimension'), idx);\n  }\n\n  if (isNaN(value)) {\n    value = dataCoordInfo.valueStart;\n  }\n\n  var baseDataOffset = dataCoordInfo.baseDataOffset;\n  var stackedData = [];\n  stackedData[baseDataOffset] = data.get(dataCoordInfo.baseDim, idx);\n  stackedData[1 - baseDataOffset] = value;\n  return coordSys.dataToPoint(stackedData);\n}\n\nexports.prepareDataCoordInfo = prepareDataCoordInfo;\nexports.getStackedOnPoint = getStackedOnPoint;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../echarts\");\n\nrequire(\"./line/LineSeries\");\n\nrequire(\"./line/LineView\");\n\nvar visualSymbol = require(\"../visual/symbol\");\n\nvar layoutPoints = require(\"../layout/points\");\n\nvar dataSample = require(\"../processor/dataSample\");\n\nrequire(\"../component/gridSimple\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// In case developer forget to include grid component\n\n\necharts.registerVisual(visualSymbol('line', 'circle', 'line'));\necharts.registerLayout(layoutPoints('line')); // Down sample after filter\n\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, dataSample('line'));","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar createListFromArray = require(\"../helper/createListFromArray\");\n\nvar SeriesModel = require(\"../../model/Series\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar _default = SeriesModel.extend({\n  type: 'series.line',\n  dependencies: ['grid', 'polar'],\n  getInitialData: function getInitialData(option, ecModel) {\n    return createListFromArray(this.getSource(), this);\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    hoverAnimation: true,\n    // stack: null\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // polarIndex: 0,\n    // If clip the overflow value\n    clipOverflow: true,\n    // cursor: null,\n    label: {\n      position: 'top'\n    },\n    // itemStyle: {\n    // },\n    lineStyle: {\n      width: 2,\n      type: 'solid'\n    },\n    // areaStyle: {\n    // origin of areaStyle. Valid values:\n    // `'auto'/null/undefined`: from axisLine to data\n    // `'start'`: from min to data\n    // `'end'`: from data to max\n    // origin: 'auto'\n    // },\n    // false, 'start', 'end', 'middle'\n    step: false,\n    // Disabled if step is true\n    smooth: false,\n    smoothMonotone: null,\n    symbol: 'emptyCircle',\n    symbolSize: 4,\n    symbolRotate: null,\n    showSymbol: true,\n    // `false`: follow the label interval strategy.\n    // `true`: show all symbols.\n    // `'auto'`: If possible, show all symbols, otherwise\n    //           follow the label interval strategy.\n    showAllSymbol: 'auto',\n    // Whether to connect break point.\n    connectNulls: false,\n    // Sampling for large data. Can be: 'average', 'max', 'min', 'sum'.\n    sampling: 'none',\n    animationEasing: 'linear',\n    // Disable progressive\n    progressive: 0,\n    hoverLayerThreshold: Infinity\n  }\n});\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar SymbolDraw = require(\"../helper/SymbolDraw\");\n\nvar SymbolClz = require(\"../helper/Symbol\");\n\nvar lineAnimationDiff = require(\"./lineAnimationDiff\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar _poly = require(\"./poly\");\n\nvar Polyline = _poly.Polyline;\nvar Polygon = _poly.Polygon;\n\nvar ChartView = require(\"../../view/Chart\");\n\nvar _number = require(\"../../util/number\");\n\nvar round = _number.round;\n\nvar _helper = require(\"./helper\");\n\nvar prepareDataCoordInfo = _helper.prepareDataCoordInfo;\nvar getStackedOnPoint = _helper.getStackedOnPoint;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME step not support polar\n\nfunction isPointsSame(points1, points2) {\n  if (points1.length !== points2.length) {\n    return;\n  }\n\n  for (var i = 0; i < points1.length; i++) {\n    var p1 = points1[i];\n    var p2 = points2[i];\n\n    if (p1[0] !== p2[0] || p1[1] !== p2[1]) {\n      return;\n    }\n  }\n\n  return true;\n}\n\nfunction getSmooth(smooth) {\n  return typeof smooth === 'number' ? smooth : smooth ? 0.5 : 0;\n}\n\nfunction getAxisExtentWithGap(axis) {\n  var extent = axis.getGlobalExtent();\n\n  if (axis.onBand) {\n    // Remove extra 1px to avoid line miter in clipped edge\n    var halfBandWidth = axis.getBandWidth() / 2 - 1;\n    var dir = extent[1] > extent[0] ? 1 : -1;\n    extent[0] += dir * halfBandWidth;\n    extent[1] -= dir * halfBandWidth;\n  }\n\n  return extent;\n}\n/**\n * @param {module:echarts/coord/cartesian/Cartesian2D|module:echarts/coord/polar/Polar} coordSys\n * @param {module:echarts/data/List} data\n * @param {Object} dataCoordInfo\n * @param {Array.<Array.<number>>} points\n */\n\n\nfunction getStackedOnPoints(coordSys, data, dataCoordInfo) {\n  if (!dataCoordInfo.valueDim) {\n    return [];\n  }\n\n  var points = [];\n\n  for (var idx = 0, len = data.count(); idx < len; idx++) {\n    points.push(getStackedOnPoint(dataCoordInfo, coordSys, data, idx));\n  }\n\n  return points;\n}\n\nfunction createGridClipShape(cartesian, hasAnimation, forSymbol, seriesModel) {\n  var xExtent = getAxisExtentWithGap(cartesian.getAxis('x'));\n  var yExtent = getAxisExtentWithGap(cartesian.getAxis('y'));\n  var isHorizontal = cartesian.getBaseAxis().isHorizontal();\n  var x = Math.min(xExtent[0], xExtent[1]);\n  var y = Math.min(yExtent[0], yExtent[1]);\n  var width = Math.max(xExtent[0], xExtent[1]) - x;\n  var height = Math.max(yExtent[0], yExtent[1]) - y; // Avoid float number rounding error for symbol on the edge of axis extent.\n  // See #7913 and `test/dataZoom-clip.html`.\n\n  if (forSymbol) {\n    x -= 0.5;\n    width += 0.5;\n    y -= 0.5;\n    height += 0.5;\n  } else {\n    var lineWidth = seriesModel.get('lineStyle.width') || 2; // Expand clip shape to avoid clipping when line value exceeds axis\n\n    var expandSize = seriesModel.get('clipOverflow') ? lineWidth / 2 : Math.max(width, height);\n\n    if (isHorizontal) {\n      y -= expandSize;\n      height += expandSize * 2;\n    } else {\n      x -= expandSize;\n      width += expandSize * 2;\n    }\n  }\n\n  var clipPath = new graphic.Rect({\n    shape: {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    }\n  });\n\n  if (hasAnimation) {\n    clipPath.shape[isHorizontal ? 'width' : 'height'] = 0;\n    graphic.initProps(clipPath, {\n      shape: {\n        width: width,\n        height: height\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createPolarClipShape(polar, hasAnimation, forSymbol, seriesModel) {\n  var angleAxis = polar.getAngleAxis();\n  var radiusAxis = polar.getRadiusAxis();\n  var radiusExtent = radiusAxis.getExtent().slice();\n  radiusExtent[0] > radiusExtent[1] && radiusExtent.reverse();\n  var angleExtent = angleAxis.getExtent();\n  var RADIAN = Math.PI / 180; // Avoid float number rounding error for symbol on the edge of axis extent.\n\n  if (forSymbol) {\n    radiusExtent[0] -= 0.5;\n    radiusExtent[1] += 0.5;\n  }\n\n  var clipPath = new graphic.Sector({\n    shape: {\n      cx: round(polar.cx, 1),\n      cy: round(polar.cy, 1),\n      r0: round(radiusExtent[0], 1),\n      r: round(radiusExtent[1], 1),\n      startAngle: -angleExtent[0] * RADIAN,\n      endAngle: -angleExtent[1] * RADIAN,\n      clockwise: angleAxis.inverse\n    }\n  });\n\n  if (hasAnimation) {\n    clipPath.shape.endAngle = -angleExtent[0] * RADIAN;\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: -angleExtent[1] * RADIAN\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createClipShape(coordSys, hasAnimation, forSymbol, seriesModel) {\n  return coordSys.type === 'polar' ? createPolarClipShape(coordSys, hasAnimation, forSymbol, seriesModel) : createGridClipShape(coordSys, hasAnimation, forSymbol, seriesModel);\n}\n\nfunction turnPointsIntoStep(points, coordSys, stepTurnAt) {\n  var baseAxis = coordSys.getBaseAxis();\n  var baseIndex = baseAxis.dim === 'x' || baseAxis.dim === 'radius' ? 0 : 1;\n  var stepPoints = [];\n\n  for (var i = 0; i < points.length - 1; i++) {\n    var nextPt = points[i + 1];\n    var pt = points[i];\n    stepPoints.push(pt);\n    var stepPt = [];\n\n    switch (stepTurnAt) {\n      case 'end':\n        stepPt[baseIndex] = nextPt[baseIndex];\n        stepPt[1 - baseIndex] = pt[1 - baseIndex]; // default is start\n\n        stepPoints.push(stepPt);\n        break;\n\n      case 'middle':\n        // default is start\n        var middle = (pt[baseIndex] + nextPt[baseIndex]) / 2;\n        var stepPt2 = [];\n        stepPt[baseIndex] = stepPt2[baseIndex] = middle;\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPt2[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt);\n        stepPoints.push(stepPt2);\n        break;\n\n      default:\n        stepPt[baseIndex] = pt[baseIndex];\n        stepPt[1 - baseIndex] = nextPt[1 - baseIndex]; // default is start\n\n        stepPoints.push(stepPt);\n    }\n  } // Last points\n\n\n  points[i] && stepPoints.push(points[i]);\n  return stepPoints;\n}\n\nfunction getVisualGradient(data, coordSys) {\n  var visualMetaList = data.getVisual('visualMeta');\n\n  if (!visualMetaList || !visualMetaList.length || !data.count()) {\n    // When data.count() is 0, gradient range can not be calculated.\n    return;\n  }\n\n  if (coordSys.type !== 'cartesian2d') {\n    return;\n  }\n\n  var coordDim;\n  var visualMeta;\n\n  for (var i = visualMetaList.length - 1; i >= 0; i--) {\n    var dimIndex = visualMetaList[i].dimension;\n    var dimName = data.dimensions[dimIndex];\n    var dimInfo = data.getDimensionInfo(dimName);\n    coordDim = dimInfo && dimInfo.coordDim; // Can only be x or y\n\n    if (coordDim === 'x' || coordDim === 'y') {\n      visualMeta = visualMetaList[i];\n      break;\n    }\n  }\n\n  if (!visualMeta) {\n    return;\n  } // If the area to be rendered is bigger than area defined by LinearGradient,\n  // the canvas spec prescribes that the color of the first stop and the last\n  // stop should be used. But if two stops are added at offset 0, in effect\n  // browsers use the color of the second stop to render area outside\n  // LinearGradient. So we can only infinitesimally extend area defined in\n  // LinearGradient to render `outerColors`.\n\n\n  var axis = coordSys.getAxis(coordDim); // dataToCoor mapping may not be linear, but must be monotonic.\n\n  var colorStops = zrUtil.map(visualMeta.stops, function (stop) {\n    return {\n      coord: axis.toGlobalCoord(axis.dataToCoord(stop.value)),\n      color: stop.color\n    };\n  });\n  var stopLen = colorStops.length;\n  var outerColors = visualMeta.outerColors.slice();\n\n  if (stopLen && colorStops[0].coord > colorStops[stopLen - 1].coord) {\n    colorStops.reverse();\n    outerColors.reverse();\n  }\n\n  var tinyExtent = 10; // Arbitrary value: 10px\n\n  var minCoord = colorStops[0].coord - tinyExtent;\n  var maxCoord = colorStops[stopLen - 1].coord + tinyExtent;\n  var coordSpan = maxCoord - minCoord;\n\n  if (coordSpan < 1e-3) {\n    return 'transparent';\n  }\n\n  zrUtil.each(colorStops, function (stop) {\n    stop.offset = (stop.coord - minCoord) / coordSpan;\n  });\n  colorStops.push({\n    offset: stopLen ? colorStops[stopLen - 1].offset : 0.5,\n    color: outerColors[1] || 'transparent'\n  });\n  colorStops.unshift({\n    // notice colorStops.length have been changed.\n    offset: stopLen ? colorStops[0].offset : 0.5,\n    color: outerColors[0] || 'transparent'\n  }); // zrUtil.each(colorStops, function (colorStop) {\n  //     // Make sure each offset has rounded px to avoid not sharp edge\n  //     colorStop.offset = (Math.round(colorStop.offset * (end - start) + start) - start) / (end - start);\n  // });\n\n  var gradient = new graphic.LinearGradient(0, 0, 0, 0, colorStops, true);\n  gradient[coordDim] = minCoord;\n  gradient[coordDim + '2'] = maxCoord;\n  return gradient;\n}\n\nfunction getIsIgnoreFunc(seriesModel, data, coordSys) {\n  var showAllSymbol = seriesModel.get('showAllSymbol');\n  var isAuto = showAllSymbol === 'auto';\n\n  if (showAllSymbol && !isAuto) {\n    return;\n  }\n\n  var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n  if (!categoryAxis) {\n    return;\n  } // Note that category label interval strategy might bring some weird effect\n  // in some scenario: users may wonder why some of the symbols are not\n  // displayed. So we show all symbols as possible as we can.\n\n\n  if (isAuto // Simplify the logic, do not determine label overlap here.\n  && canShowAllSymbolForCategory(categoryAxis, data)) {\n    return;\n  } // Otherwise follow the label interval strategy on category axis.\n\n\n  var categoryDataDim = data.mapDimension(categoryAxis.dim);\n  var labelMap = {};\n  zrUtil.each(categoryAxis.getViewLabels(), function (labelItem) {\n    labelMap[labelItem.tickValue] = 1;\n  });\n  return function (dataIndex) {\n    return !labelMap.hasOwnProperty(data.get(categoryDataDim, dataIndex));\n  };\n}\n\nfunction canShowAllSymbolForCategory(categoryAxis, data) {\n  // In mose cases, line is monotonous on category axis, and the label size\n  // is close with each other. So we check the symbol size and some of the\n  // label size alone with the category axis to estimate whether all symbol\n  // can be shown without overlap.\n  var axisExtent = categoryAxis.getExtent();\n  var availSize = Math.abs(axisExtent[1] - axisExtent[0]) / categoryAxis.scale.count();\n  isNaN(availSize) && (availSize = 0); // 0/0 is NaN.\n  // Sampling some points, max 5.\n\n  var dataLen = data.count();\n  var step = Math.max(1, Math.round(dataLen / 5));\n\n  for (var dataIndex = 0; dataIndex < dataLen; dataIndex += step) {\n    if (SymbolClz.getSymbolSize(data, dataIndex // Only for cartesian, where `isHorizontal` exists.\n    )[categoryAxis.isHorizontal() ? 1 : 0] // Empirical number\n    * 1.5 > availSize) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nvar _default = ChartView.extend({\n  type: 'line',\n  init: function init() {\n    var lineGroup = new graphic.Group();\n    var symbolDraw = new SymbolDraw();\n    this.group.add(symbolDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineGroup = lineGroup;\n  },\n  render: function render(seriesModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var lineStyleModel = seriesModel.getModel('lineStyle');\n    var areaStyleModel = seriesModel.getModel('areaStyle');\n    var points = data.mapArray(data.getItemLayout);\n    var isCoordSysPolar = coordSys.type === 'polar';\n    var prevCoordSys = this._coordSys;\n    var symbolDraw = this._symbolDraw;\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var lineGroup = this._lineGroup;\n    var hasAnimation = seriesModel.get('animation');\n    var isAreaChart = !areaStyleModel.isEmpty();\n    var valueOrigin = areaStyleModel.get('origin');\n    var dataCoordInfo = prepareDataCoordInfo(coordSys, data, valueOrigin);\n    var stackedOnPoints = getStackedOnPoints(coordSys, data, dataCoordInfo);\n    var showSymbol = seriesModel.get('showSymbol');\n    var isIgnoreFunc = showSymbol && !isCoordSysPolar && getIsIgnoreFunc(seriesModel, data, coordSys); // Remove temporary symbols\n\n    var oldData = this._data;\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    }); // Remove previous created symbols if showSymbol changed to false\n\n    if (!showSymbol) {\n      symbolDraw.remove();\n    }\n\n    group.add(lineGroup); // FIXME step not support polar\n\n    var step = !isCoordSysPolar && seriesModel.get('step'); // Initialization animation or coordinate system changed\n\n    if (!(polyline && prevCoordSys.type === coordSys.type && step === this._step)) {\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: createClipShape(coordSys, false, true, seriesModel)\n      });\n\n      if (step) {\n        // TODO If stacked series is not step\n        points = turnPointsIntoStep(points, coordSys, step);\n        stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n      }\n\n      polyline = this._newPolyline(points, coordSys, hasAnimation);\n\n      if (isAreaChart) {\n        polygon = this._newPolygon(points, stackedOnPoints, coordSys, hasAnimation);\n      }\n\n      lineGroup.setClipPath(createClipShape(coordSys, true, false, seriesModel));\n    } else {\n      if (isAreaChart && !polygon) {\n        // If areaStyle is added\n        polygon = this._newPolygon(points, stackedOnPoints, coordSys, hasAnimation);\n      } else if (polygon && !isAreaChart) {\n        // If areaStyle is removed\n        lineGroup.remove(polygon);\n        polygon = this._polygon = null;\n      } // Update clipPath\n\n\n      lineGroup.setClipPath(createClipShape(coordSys, false, false, seriesModel)); // Always update, or it is wrong in the case turning on legend\n      // because points are not changed\n\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: createClipShape(coordSys, false, true, seriesModel)\n      }); // Stop symbol animation and sync with line points\n      // FIXME performance?\n\n      data.eachItemGraphicEl(function (el) {\n        el.stopAnimation(true);\n      }); // In the case data zoom triggerred refreshing frequently\n      // Data may not change if line has a category axis. So it should animate nothing\n\n      if (!isPointsSame(this._stackedOnPoints, stackedOnPoints) || !isPointsSame(this._points, points)) {\n        if (hasAnimation) {\n          this._updateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin);\n        } else {\n          // Not do it in update with animation\n          if (step) {\n            // TODO If stacked series is not step\n            points = turnPointsIntoStep(points, coordSys, step);\n            stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n          }\n\n          polyline.setShape({\n            points: points\n          });\n          polygon && polygon.setShape({\n            points: points,\n            stackedOnPoints: stackedOnPoints\n          });\n        }\n      }\n    }\n\n    var visualColor = getVisualGradient(data, coordSys) || data.getVisual('color');\n    polyline.useStyle(zrUtil.defaults( // Use color in lineStyle first\n    lineStyleModel.getLineStyle(), {\n      fill: 'none',\n      stroke: visualColor,\n      lineJoin: 'bevel'\n    }));\n    var smooth = seriesModel.get('smooth');\n    smooth = getSmooth(seriesModel.get('smooth'));\n    polyline.setShape({\n      smooth: smooth,\n      smoothMonotone: seriesModel.get('smoothMonotone'),\n      connectNulls: seriesModel.get('connectNulls')\n    });\n\n    if (polygon) {\n      var stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\n      var stackedOnSmooth = 0;\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: visualColor,\n        opacity: 0.7,\n        lineJoin: 'bevel'\n      }));\n\n      if (stackedOnSeries) {\n        stackedOnSmooth = getSmooth(stackedOnSeries.get('smooth'));\n      }\n\n      polygon.setShape({\n        smooth: smooth,\n        stackedOnSmooth: stackedOnSmooth,\n        smoothMonotone: seriesModel.get('smoothMonotone'),\n        connectNulls: seriesModel.get('connectNulls')\n      });\n    }\n\n    this._data = data; // Save the coordinate system for transition animation when data changed\n\n    this._coordSys = coordSys;\n    this._stackedOnPoints = stackedOnPoints;\n    this._points = points;\n    this._step = step;\n    this._valueOrigin = valueOrigin;\n  },\n  dispose: function dispose() {},\n  highlight: function highlight(seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    if (!(dataIndex instanceof Array) && dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (!symbol) {\n        // Create a temporary symbol if it is not exists\n        var pt = data.getItemLayout(dataIndex);\n\n        if (!pt) {\n          // Null data\n          return;\n        }\n\n        symbol = new SymbolClz(data, dataIndex);\n        symbol.position = pt;\n        symbol.setZ(seriesModel.get('zlevel'), seriesModel.get('z'));\n        symbol.ignore = isNaN(pt[0]) || isNaN(pt[1]);\n        symbol.__temp = true;\n        data.setItemGraphicEl(dataIndex, symbol); // Stop scale animation\n\n        symbol.stopSymbolAnimation(true);\n        this.group.add(symbol);\n      }\n\n      symbol.highlight();\n    } else {\n      // Highlight whole series\n      ChartView.prototype.highlight.call(this, seriesModel, ecModel, api, payload);\n    }\n  },\n  downplay: function downplay(seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    if (dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (symbol) {\n        if (symbol.__temp) {\n          data.setItemGraphicEl(dataIndex, null);\n          this.group.remove(symbol);\n        } else {\n          symbol.downplay();\n        }\n      }\n    } else {\n      // FIXME\n      // can not downplay completely.\n      // Downplay whole series\n      ChartView.prototype.downplay.call(this, seriesModel, ecModel, api, payload);\n    }\n  },\n\n  /**\n   * @param {module:zrender/container/Group} group\n   * @param {Array.<Array.<number>>} points\n   * @private\n   */\n  _newPolyline: function _newPolyline(points) {\n    var polyline = this._polyline; // Remove previous created polyline\n\n    if (polyline) {\n      this._lineGroup.remove(polyline);\n    }\n\n    polyline = new Polyline({\n      shape: {\n        points: points\n      },\n      silent: true,\n      z2: 10\n    });\n\n    this._lineGroup.add(polyline);\n\n    this._polyline = polyline;\n    return polyline;\n  },\n\n  /**\n   * @param {module:zrender/container/Group} group\n   * @param {Array.<Array.<number>>} stackedOnPoints\n   * @param {Array.<Array.<number>>} points\n   * @private\n   */\n  _newPolygon: function _newPolygon(points, stackedOnPoints) {\n    var polygon = this._polygon; // Remove previous created polygon\n\n    if (polygon) {\n      this._lineGroup.remove(polygon);\n    }\n\n    polygon = new Polygon({\n      shape: {\n        points: points,\n        stackedOnPoints: stackedOnPoints\n      },\n      silent: true\n    });\n\n    this._lineGroup.add(polygon);\n\n    this._polygon = polygon;\n    return polygon;\n  },\n\n  /**\n   * @private\n   */\n  // FIXME Two value axis\n  _updateAnimation: function _updateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin) {\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var seriesModel = data.hostModel;\n    var diff = lineAnimationDiff(this._data, data, this._stackedOnPoints, stackedOnPoints, this._coordSys, coordSys, this._valueOrigin, valueOrigin);\n    var current = diff.current;\n    var stackedOnCurrent = diff.stackedOnCurrent;\n    var next = diff.next;\n    var stackedOnNext = diff.stackedOnNext;\n\n    if (step) {\n      // TODO If stacked series is not step\n      current = turnPointsIntoStep(diff.current, coordSys, step);\n      stackedOnCurrent = turnPointsIntoStep(diff.stackedOnCurrent, coordSys, step);\n      next = turnPointsIntoStep(diff.next, coordSys, step);\n      stackedOnNext = turnPointsIntoStep(diff.stackedOnNext, coordSys, step);\n    } // `diff.current` is subset of `current` (which should be ensured by\n    // turnPointsIntoStep), so points in `__points` can be updated when\n    // points in `current` are update during animation.\n\n\n    polyline.shape.__points = diff.current;\n    polyline.shape.points = current;\n    graphic.updateProps(polyline, {\n      shape: {\n        points: next\n      }\n    }, seriesModel);\n\n    if (polygon) {\n      polygon.setShape({\n        points: current,\n        stackedOnPoints: stackedOnCurrent\n      });\n      graphic.updateProps(polygon, {\n        shape: {\n          points: next,\n          stackedOnPoints: stackedOnNext\n        }\n      }, seriesModel);\n    }\n\n    var updatedDataInfo = [];\n    var diffStatus = diff.status;\n\n    for (var i = 0; i < diffStatus.length; i++) {\n      var cmd = diffStatus[i].cmd;\n\n      if (cmd === '=') {\n        var el = data.getItemGraphicEl(diffStatus[i].idx1);\n\n        if (el) {\n          updatedDataInfo.push({\n            el: el,\n            ptIdx: i // Index of points\n\n          });\n        }\n      }\n    }\n\n    if (polyline.animators && polyline.animators.length) {\n      polyline.animators[0].during(function () {\n        for (var i = 0; i < updatedDataInfo.length; i++) {\n          var el = updatedDataInfo[i].el;\n          el.attr('position', polyline.shape.__points[updatedDataInfo[i].ptIdx]);\n        }\n      });\n    }\n  },\n  remove: function remove(ecModel) {\n    var group = this.group;\n    var oldData = this._data;\n\n    this._lineGroup.removeAll();\n\n    this._symbolDraw.remove(true); // Remove temporary created elements when highlighting\n\n\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    });\n    this._polyline = this._polygon = this._coordSys = this._points = this._stackedOnPoints = this._data = null;\n  }\n});\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar graphic = require(\"../../util/graphic\");\n\nvar SymbolClz = require(\"./Symbol\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isObject = _util.isObject;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/chart/helper/SymbolDraw\n */\n\n/**\n * @constructor\n * @alias module:echarts/chart/helper/SymbolDraw\n * @param {module:zrender/graphic/Group} [symbolCtor]\n */\n\nfunction SymbolDraw(symbolCtor) {\n  this.group = new graphic.Group();\n  this._symbolCtor = symbolCtor || SymbolClz;\n}\n\nvar symbolDrawProto = SymbolDraw.prototype;\n\nfunction symbolNeedsDraw(data, point, idx, opt) {\n  return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx)) // We do not set clipShape on group, because it will cut part of\n  // the symbol element shape. We use the same clip shape here as\n  // the line clip.\n  && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n}\n/**\n * Update symbols draw by new data\n * @param {module:echarts/data/List} data\n * @param {Object} [opt] Or isIgnore\n * @param {Function} [opt.isIgnore]\n * @param {Object} [opt.clipShape]\n */\n\n\nsymbolDrawProto.updateData = function (data, opt) {\n  opt = normalizeUpdateOpt(opt);\n  var group = this.group;\n  var seriesModel = data.hostModel;\n  var oldData = this._data;\n  var SymbolCtor = this._symbolCtor;\n  var seriesScope = makeSeriesScope(data); // There is no oldLineData only when first rendering or switching from\n  // stream mode to normal mode, where previous elements should be removed.\n\n  if (!oldData) {\n    group.removeAll();\n  }\n\n  data.diff(oldData).add(function (newIdx) {\n    var point = data.getItemLayout(newIdx);\n\n    if (symbolNeedsDraw(data, point, newIdx, opt)) {\n      var symbolEl = new SymbolCtor(data, newIdx, seriesScope);\n      symbolEl.attr('position', point);\n      data.setItemGraphicEl(newIdx, symbolEl);\n      group.add(symbolEl);\n    }\n  }).update(function (newIdx, oldIdx) {\n    var symbolEl = oldData.getItemGraphicEl(oldIdx);\n    var point = data.getItemLayout(newIdx);\n\n    if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n      group.remove(symbolEl);\n      return;\n    }\n\n    if (!symbolEl) {\n      symbolEl = new SymbolCtor(data, newIdx);\n      symbolEl.attr('position', point);\n    } else {\n      symbolEl.updateData(data, newIdx, seriesScope);\n      graphic.updateProps(symbolEl, {\n        position: point\n      }, seriesModel);\n    } // Add back\n\n\n    group.add(symbolEl);\n    data.setItemGraphicEl(newIdx, symbolEl);\n  }).remove(function (oldIdx) {\n    var el = oldData.getItemGraphicEl(oldIdx);\n    el && el.fadeOut(function () {\n      group.remove(el);\n    });\n  }).execute();\n  this._data = data;\n};\n\nsymbolDrawProto.isPersistent = function () {\n  return true;\n};\n\nsymbolDrawProto.updateLayout = function () {\n  var data = this._data;\n\n  if (data) {\n    // Not use animation\n    data.eachItemGraphicEl(function (el, idx) {\n      var point = data.getItemLayout(idx);\n      el.attr('position', point);\n    });\n  }\n};\n\nsymbolDrawProto.incrementalPrepareUpdate = function (data) {\n  this._seriesScope = makeSeriesScope(data);\n  this._data = null;\n  this.group.removeAll();\n};\n/**\n * Update symbols draw by new data\n * @param {module:echarts/data/List} data\n * @param {Object} [opt] Or isIgnore\n * @param {Function} [opt.isIgnore]\n * @param {Object} [opt.clipShape]\n */\n\n\nsymbolDrawProto.incrementalUpdate = function (taskParams, data, opt) {\n  opt = normalizeUpdateOpt(opt);\n\n  function updateIncrementalAndHover(el) {\n    if (!el.isGroup) {\n      el.incremental = el.useHoverLayer = true;\n    }\n  }\n\n  for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n    var point = data.getItemLayout(idx);\n\n    if (symbolNeedsDraw(data, point, idx, opt)) {\n      var el = new this._symbolCtor(data, idx, this._seriesScope);\n      el.traverse(updateIncrementalAndHover);\n      el.attr('position', point);\n      this.group.add(el);\n      data.setItemGraphicEl(idx, el);\n    }\n  }\n};\n\nfunction normalizeUpdateOpt(opt) {\n  if (opt != null && !isObject(opt)) {\n    opt = {\n      isIgnore: opt\n    };\n  }\n\n  return opt || {};\n}\n\nsymbolDrawProto.remove = function (enableAnimation) {\n  var group = this.group;\n  var data = this._data; // Incremental model do not have this._data.\n\n  if (data && enableAnimation) {\n    data.eachItemGraphicEl(function (el) {\n      el.fadeOut(function () {\n        group.remove(el);\n      });\n    });\n  } else {\n    group.removeAll();\n  }\n};\n\nfunction makeSeriesScope(data) {\n  var seriesModel = data.hostModel;\n  return {\n    itemStyle: seriesModel.getModel('itemStyle').getItemStyle(['color']),\n    hoverItemStyle: seriesModel.getModel('emphasis.itemStyle').getItemStyle(),\n    symbolRotate: seriesModel.get('symbolRotate'),\n    symbolOffset: seriesModel.get('symbolOffset'),\n    hoverAnimation: seriesModel.get('hoverAnimation'),\n    labelModel: seriesModel.getModel('label'),\n    hoverLabelModel: seriesModel.getModel('emphasis.label'),\n    cursorStyle: seriesModel.get('cursor')\n  };\n}\n\nvar _default = SymbolDraw;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _helper = require(\"./helper\");\n\nvar prepareDataCoordInfo = _helper.prepareDataCoordInfo;\nvar getStackedOnPoint = _helper.getStackedOnPoint;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// var arrayDiff = require('zrender/src/core/arrayDiff');\n// 'zrender/src/core/arrayDiff' has been used before, but it did\n// not do well in performance when roam with fixed dataZoom window.\n// function convertToIntId(newIdList, oldIdList) {\n//     // Generate int id instead of string id.\n//     // Compare string maybe slow in score function of arrDiff\n//     // Assume id in idList are all unique\n//     var idIndicesMap = {};\n//     var idx = 0;\n//     for (var i = 0; i < newIdList.length; i++) {\n//         idIndicesMap[newIdList[i]] = idx;\n//         newIdList[i] = idx++;\n//     }\n//     for (var i = 0; i < oldIdList.length; i++) {\n//         var oldId = oldIdList[i];\n//         // Same with newIdList\n//         if (idIndicesMap[oldId]) {\n//             oldIdList[i] = idIndicesMap[oldId];\n//         }\n//         else {\n//             oldIdList[i] = idx++;\n//         }\n//     }\n// }\n\nfunction diffData(oldData, newData) {\n  var diffResult = [];\n  newData.diff(oldData).add(function (idx) {\n    diffResult.push({\n      cmd: '+',\n      idx: idx\n    });\n  }).update(function (newIdx, oldIdx) {\n    diffResult.push({\n      cmd: '=',\n      idx: oldIdx,\n      idx1: newIdx\n    });\n  }).remove(function (idx) {\n    diffResult.push({\n      cmd: '-',\n      idx: idx\n    });\n  }).execute();\n  return diffResult;\n}\n\nfunction _default(oldData, newData, oldStackedOnPoints, newStackedOnPoints, oldCoordSys, newCoordSys, oldValueOrigin, newValueOrigin) {\n  var diff = diffData(oldData, newData); // var newIdList = newData.mapArray(newData.getId);\n  // var oldIdList = oldData.mapArray(oldData.getId);\n  // convertToIntId(newIdList, oldIdList);\n  // // FIXME One data ?\n  // diff = arrayDiff(oldIdList, newIdList);\n\n  var currPoints = [];\n  var nextPoints = []; // Points for stacking base line\n\n  var currStackedPoints = [];\n  var nextStackedPoints = [];\n  var status = [];\n  var sortedIndices = [];\n  var rawIndices = [];\n  var newDataOldCoordInfo = prepareDataCoordInfo(oldCoordSys, newData, oldValueOrigin);\n  var oldDataNewCoordInfo = prepareDataCoordInfo(newCoordSys, oldData, newValueOrigin);\n\n  for (var i = 0; i < diff.length; i++) {\n    var diffItem = diff[i];\n    var pointAdded = true; // FIXME, animation is not so perfect when dataZoom window moves fast\n    // Which is in case remvoing or add more than one data in the tail or head\n\n    switch (diffItem.cmd) {\n      case '=':\n        var currentPt = oldData.getItemLayout(diffItem.idx);\n        var nextPt = newData.getItemLayout(diffItem.idx1); // If previous data is NaN, use next point directly\n\n        if (isNaN(currentPt[0]) || isNaN(currentPt[1])) {\n          currentPt = nextPt.slice();\n        }\n\n        currPoints.push(currentPt);\n        nextPoints.push(nextPt);\n        currStackedPoints.push(oldStackedOnPoints[diffItem.idx]);\n        nextStackedPoints.push(newStackedOnPoints[diffItem.idx1]);\n        rawIndices.push(newData.getRawIndex(diffItem.idx1));\n        break;\n\n      case '+':\n        var idx = diffItem.idx;\n        currPoints.push(oldCoordSys.dataToPoint([newData.get(newDataOldCoordInfo.dataDimsForPoint[0], idx), newData.get(newDataOldCoordInfo.dataDimsForPoint[1], idx)]));\n        nextPoints.push(newData.getItemLayout(idx).slice());\n        currStackedPoints.push(getStackedOnPoint(newDataOldCoordInfo, oldCoordSys, newData, idx));\n        nextStackedPoints.push(newStackedOnPoints[idx]);\n        rawIndices.push(newData.getRawIndex(idx));\n        break;\n\n      case '-':\n        var idx = diffItem.idx;\n        var rawIndex = oldData.getRawIndex(idx); // Data is replaced. In the case of dynamic data queue\n        // FIXME FIXME FIXME\n\n        if (rawIndex !== idx) {\n          currPoints.push(oldData.getItemLayout(idx));\n          nextPoints.push(newCoordSys.dataToPoint([oldData.get(oldDataNewCoordInfo.dataDimsForPoint[0], idx), oldData.get(oldDataNewCoordInfo.dataDimsForPoint[1], idx)]));\n          currStackedPoints.push(oldStackedOnPoints[idx]);\n          nextStackedPoints.push(getStackedOnPoint(oldDataNewCoordInfo, newCoordSys, oldData, idx));\n          rawIndices.push(rawIndex);\n        } else {\n          pointAdded = false;\n        }\n\n    } // Original indices\n\n\n    if (pointAdded) {\n      status.push(diffItem);\n      sortedIndices.push(sortedIndices.length);\n    }\n  } // Diff result may be crossed if all items are changed\n  // Sort by data index\n\n\n  sortedIndices.sort(function (a, b) {\n    return rawIndices[a] - rawIndices[b];\n  });\n  var sortedCurrPoints = [];\n  var sortedNextPoints = [];\n  var sortedCurrStackedPoints = [];\n  var sortedNextStackedPoints = [];\n  var sortedStatus = [];\n\n  for (var i = 0; i < sortedIndices.length; i++) {\n    var idx = sortedIndices[i];\n    sortedCurrPoints[i] = currPoints[idx];\n    sortedNextPoints[i] = nextPoints[idx];\n    sortedCurrStackedPoints[i] = currStackedPoints[idx];\n    sortedNextStackedPoints[i] = nextStackedPoints[idx];\n    sortedStatus[i] = status[idx];\n  }\n\n  return {\n    current: sortedCurrPoints,\n    next: sortedNextPoints,\n    stackedOnCurrent: sortedCurrStackedPoints,\n    stackedOnNext: sortedNextStackedPoints,\n    status: sortedStatus\n  };\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar Path = require(\"zrender/lib/graphic/Path\");\n\nvar vec2 = require(\"zrender/lib/core/vector\");\n\nvar fixClipWithShadow = require(\"zrender/lib/graphic/helper/fixClipWithShadow\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Poly path support NaN point\n\n\nvar vec2Min = vec2.min;\nvar vec2Max = vec2.max;\nvar scaleAndAdd = vec2.scaleAndAdd;\nvar v2Copy = vec2.copy; // Temporary variable\n\nvar v = [];\nvar cp0 = [];\nvar cp1 = [];\n\nfunction isPointNull(p) {\n  return isNaN(p[0]) || isNaN(p[1]);\n}\n\nfunction drawSegment(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\n  // if (smoothMonotone == null) {\n  //     if (isMono(points, 'x')) {\n  //         return drawMono(ctx, points, start, segLen, allLen,\n  //             dir, smoothMin, smoothMax, smooth, 'x', connectNulls);\n  //     }\n  //     else if (isMono(points, 'y')) {\n  //         return drawMono(ctx, points, start, segLen, allLen,\n  //             dir, smoothMin, smoothMax, smooth, 'y', connectNulls);\n  //     }\n  //     else {\n  //         return drawNonMono.apply(this, arguments);\n  //     }\n  // }\n  // else if (smoothMonotone !== 'none' && isMono(points, smoothMonotone)) {\n  //     return drawMono.apply(this, arguments);\n  // }\n  // else {\n  //     return drawNonMono.apply(this, arguments);\n  // }\n  if (smoothMonotone === 'none' || !smoothMonotone) {\n    return drawNonMono.apply(this, arguments);\n  } else {\n    return drawMono.apply(this, arguments);\n  }\n}\n/**\n * Check if points is in monotone.\n *\n * @param {number[][]} points         Array of points which is in [x, y] form\n * @param {string}     smoothMonotone 'x', 'y', or 'none', stating for which\n *                                    dimension that is checking.\n *                                    If is 'none', `drawNonMono` should be\n *                                    called.\n *                                    If is undefined, either being monotone\n *                                    in 'x' or 'y' will call `drawMono`.\n */\n// function isMono(points, smoothMonotone) {\n//     if (points.length <= 1) {\n//         return true;\n//     }\n//     var dim = smoothMonotone === 'x' ? 0 : 1;\n//     var last = points[0][dim];\n//     var lastDiff = 0;\n//     for (var i = 1; i < points.length; ++i) {\n//         var diff = points[i][dim] - last;\n//         if (!isNaN(diff) && !isNaN(lastDiff)\n//             && diff !== 0 && lastDiff !== 0\n//             && ((diff >= 0) !== (lastDiff >= 0))\n//         ) {\n//             return false;\n//         }\n//         if (!isNaN(diff) && diff !== 0) {\n//             lastDiff = diff;\n//             last = points[i][dim];\n//         }\n//     }\n//     return true;\n// }\n\n/**\n * Draw smoothed line in monotone, in which only vertical or horizontal bezier\n * control points will be used. This should be used when points are monotone\n * either in x or y dimension.\n */\n\n\nfunction drawMono(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\n  var prevIdx = 0;\n  var idx = start;\n\n  for (var k = 0; k < segLen; k++) {\n    var p = points[idx];\n\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n\n    if (isPointNull(p)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n\n      break;\n    }\n\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](p[0], p[1]);\n    } else {\n      if (smooth > 0) {\n        var prevP = points[prevIdx];\n        var dim = smoothMonotone === 'y' ? 1 : 0; // Length of control point to p, either in x or y, but not both\n\n        var ctrlLen = (p[dim] - prevP[dim]) * smooth;\n        v2Copy(cp0, prevP);\n        cp0[dim] = prevP[dim] + ctrlLen;\n        v2Copy(cp1, p);\n        cp1[dim] = p[dim] - ctrlLen;\n        ctx.bezierCurveTo(cp0[0], cp0[1], cp1[0], cp1[1], p[0], p[1]);\n      } else {\n        ctx.lineTo(p[0], p[1]);\n      }\n    }\n\n    prevIdx = idx;\n    idx += dir;\n  }\n\n  return k;\n}\n/**\n * Draw smoothed line in non-monotone, in may cause undesired curve in extreme\n * situations. This should be used when points are non-monotone neither in x or\n * y dimension.\n */\n\n\nfunction drawNonMono(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\n  var prevIdx = 0;\n  var idx = start;\n\n  for (var k = 0; k < segLen; k++) {\n    var p = points[idx];\n\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n\n    if (isPointNull(p)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n\n      break;\n    }\n\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](p[0], p[1]);\n      v2Copy(cp0, p);\n    } else {\n      if (smooth > 0) {\n        var nextIdx = idx + dir;\n        var nextP = points[nextIdx];\n\n        if (connectNulls) {\n          // Find next point not null\n          while (nextP && isPointNull(points[nextIdx])) {\n            nextIdx += dir;\n            nextP = points[nextIdx];\n          }\n        }\n\n        var ratioNextSeg = 0.5;\n        var prevP = points[prevIdx];\n        var nextP = points[nextIdx]; // Last point\n\n        if (!nextP || isPointNull(nextP)) {\n          v2Copy(cp1, p);\n        } else {\n          // If next data is null in not connect case\n          if (isPointNull(nextP) && !connectNulls) {\n            nextP = p;\n          }\n\n          vec2.sub(v, nextP, prevP);\n          var lenPrevSeg;\n          var lenNextSeg;\n\n          if (smoothMonotone === 'x' || smoothMonotone === 'y') {\n            var dim = smoothMonotone === 'x' ? 0 : 1;\n            lenPrevSeg = Math.abs(p[dim] - prevP[dim]);\n            lenNextSeg = Math.abs(p[dim] - nextP[dim]);\n          } else {\n            lenPrevSeg = vec2.dist(p, prevP);\n            lenNextSeg = vec2.dist(p, nextP);\n          } // Use ratio of seg length\n\n\n          ratioNextSeg = lenNextSeg / (lenNextSeg + lenPrevSeg);\n          scaleAndAdd(cp1, p, v, -smooth * (1 - ratioNextSeg));\n        } // Smooth constraint\n\n\n        vec2Min(cp0, cp0, smoothMax);\n        vec2Max(cp0, cp0, smoothMin);\n        vec2Min(cp1, cp1, smoothMax);\n        vec2Max(cp1, cp1, smoothMin);\n        ctx.bezierCurveTo(cp0[0], cp0[1], cp1[0], cp1[1], p[0], p[1]); // cp0 of next segment\n\n        scaleAndAdd(cp0, p, v, smooth * ratioNextSeg);\n      } else {\n        ctx.lineTo(p[0], p[1]);\n      }\n    }\n\n    prevIdx = idx;\n    idx += dir;\n  }\n\n  return k;\n}\n\nfunction getBoundingBox(points, smoothConstraint) {\n  var ptMin = [Infinity, Infinity];\n  var ptMax = [-Infinity, -Infinity];\n\n  if (smoothConstraint) {\n    for (var i = 0; i < points.length; i++) {\n      var pt = points[i];\n\n      if (pt[0] < ptMin[0]) {\n        ptMin[0] = pt[0];\n      }\n\n      if (pt[1] < ptMin[1]) {\n        ptMin[1] = pt[1];\n      }\n\n      if (pt[0] > ptMax[0]) {\n        ptMax[0] = pt[0];\n      }\n\n      if (pt[1] > ptMax[1]) {\n        ptMax[1] = pt[1];\n      }\n    }\n  }\n\n  return {\n    min: smoothConstraint ? ptMin : ptMax,\n    max: smoothConstraint ? ptMax : ptMin\n  };\n}\n\nvar Polyline = Path.extend({\n  type: 'ec-polyline',\n  shape: {\n    points: [],\n    smooth: 0,\n    smoothConstraint: true,\n    smoothMonotone: null,\n    connectNulls: false\n  },\n  style: {\n    fill: null,\n    stroke: '#000'\n  },\n  brush: fixClipWithShadow(Path.prototype.brush),\n  buildPath: function buildPath(ctx, shape) {\n    var points = shape.points;\n    var i = 0;\n    var len = points.length;\n    var result = getBoundingBox(points, shape.smoothConstraint);\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      i += drawSegment(ctx, points, i, len, len, 1, result.min, result.max, shape.smooth, shape.smoothMonotone, shape.connectNulls) + 1;\n    }\n  }\n});\nvar Polygon = Path.extend({\n  type: 'ec-polygon',\n  shape: {\n    points: [],\n    // Offset between stacked base points and points\n    stackedOnPoints: [],\n    smooth: 0,\n    stackedOnSmooth: 0,\n    smoothConstraint: true,\n    smoothMonotone: null,\n    connectNulls: false\n  },\n  brush: fixClipWithShadow(Path.prototype.brush),\n  buildPath: function buildPath(ctx, shape) {\n    var points = shape.points;\n    var stackedOnPoints = shape.stackedOnPoints;\n    var i = 0;\n    var len = points.length;\n    var smoothMonotone = shape.smoothMonotone;\n    var bbox = getBoundingBox(points, shape.smoothConstraint);\n    var stackedOnBBox = getBoundingBox(stackedOnPoints, shape.smoothConstraint);\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      var k = drawSegment(ctx, points, i, len, len, 1, bbox.min, bbox.max, shape.smooth, smoothMonotone, shape.connectNulls);\n      drawSegment(ctx, stackedOnPoints, i + k - 1, k, len, -1, stackedOnBBox.min, stackedOnBBox.max, shape.stackedOnSmooth, smoothMonotone, shape.connectNulls);\n      i += k + 1;\n      ctx.closePath();\n    }\n  }\n});\nexports.Polyline = Polyline;\nexports.Polygon = Polygon;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isFunction = _util.isFunction;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nfunction _default(seriesType, defaultSymbolType, legendSymbol) {\n  // Encoding visual for all series include which is filtered for legend drawing\n  return {\n    seriesType: seriesType,\n    // For legend.\n    performRawSeries: true,\n    reset: function reset(seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var symbolType = seriesModel.get('symbol');\n      var symbolSize = seriesModel.get('symbolSize');\n      var keepAspect = seriesModel.get('symbolKeepAspect');\n      var hasSymbolTypeCallback = isFunction(symbolType);\n      var hasSymbolSizeCallback = isFunction(symbolSize);\n      var hasCallback = hasSymbolTypeCallback || hasSymbolSizeCallback;\n      var seriesSymbol = !hasSymbolTypeCallback && symbolType ? symbolType : defaultSymbolType;\n      var seriesSymbolSize = !hasSymbolSizeCallback ? symbolSize : null;\n      data.setVisual({\n        legendSymbol: legendSymbol || seriesSymbol,\n        // If seting callback functions on `symbol` or `symbolSize`, for simplicity and avoiding\n        // to bring trouble, we do not pick a reuslt from one of its calling on data item here,\n        // but just use the default value. Callback on `symbol` or `symbolSize` is convenient in\n        // some cases but generally it is not recommanded.\n        symbol: seriesSymbol,\n        symbolSize: seriesSymbolSize,\n        symbolKeepAspect: keepAspect\n      }); // Only visible series has each data be visual encoded\n\n      if (ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n\n      function dataEach(data, idx) {\n        if (hasCallback) {\n          var rawValue = seriesModel.getRawValue(idx);\n          var params = seriesModel.getDataParams(idx);\n          hasSymbolTypeCallback && data.setItemVisual(idx, 'symbol', symbolType(rawValue, params));\n          hasSymbolSizeCallback && data.setItemVisual(idx, 'symbolSize', symbolSize(rawValue, params));\n        }\n\n        if (data.hasItemOption) {\n          var itemModel = data.getItemModel(idx);\n          var itemSymbolType = itemModel.getShallow('symbol', true);\n          var itemSymbolSize = itemModel.getShallow('symbolSize', true);\n          var itemSymbolKeepAspect = itemModel.getShallow('symbolKeepAspect', true); // If has item symbol\n\n          if (itemSymbolType != null) {\n            data.setItemVisual(idx, 'symbol', itemSymbolType);\n          }\n\n          if (itemSymbolSize != null) {\n            // PENDING Transform symbolSize ?\n            data.setItemVisual(idx, 'symbolSize', itemSymbolSize);\n          }\n\n          if (itemSymbolKeepAspect != null) {\n            data.setItemVisual(idx, 'symbolKeepAspect', itemSymbolKeepAspect);\n          }\n        }\n      }\n\n      return {\n        dataEach: data.hasItemOption || hasCallback ? dataEach : null\n      };\n    }\n  };\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _util = require(\"zrender/lib/core/util\");\n\nvar map = _util.map;\n\nvar createRenderPlanner = require(\"../chart/helper/createRenderPlanner\");\n\nvar _dataStackHelper = require(\"../data/helper/dataStackHelper\");\n\nvar isDimensionStacked = _dataStackHelper.isDimensionStacked;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float32Array */\n\nfunction _default(seriesType) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function reset(seriesModel) {\n      var data = seriesModel.getData();\n      var coordSys = seriesModel.coordinateSystem;\n      var pipelineContext = seriesModel.pipelineContext;\n      var isLargeRender = pipelineContext.large;\n\n      if (!coordSys) {\n        return;\n      }\n\n      var dims = map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }).slice(0, 2);\n      var dimLen = dims.length;\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n      if (isDimensionStacked(data, dims[0]\n      /*, dims[1]*/\n      )) {\n        dims[0] = stackResultDim;\n      }\n\n      if (isDimensionStacked(data, dims[1]\n      /*, dims[0]*/\n      )) {\n        dims[1] = stackResultDim;\n      }\n\n      function progress(params, data) {\n        var segCount = params.end - params.start;\n        var points = isLargeRender && new Float32Array(segCount * dimLen);\n\n        for (var i = params.start, offset = 0, tmpIn = [], tmpOut = []; i < params.end; i++) {\n          var point;\n\n          if (dimLen === 1) {\n            var x = data.get(dims[0], i);\n            point = !isNaN(x) && coordSys.dataToPoint(x, null, tmpOut);\n          } else {\n            var x = tmpIn[0] = data.get(dims[0], i);\n            var y = tmpIn[1] = data.get(dims[1], i); // Also {Array.<number>}, not undefined to avoid if...else... statement\n\n            point = !isNaN(x) && !isNaN(y) && coordSys.dataToPoint(tmpIn, null, tmpOut);\n          }\n\n          if (isLargeRender) {\n            points[offset++] = point ? point[0] : NaN;\n            points[offset++] = point ? point[1] : NaN;\n          } else {\n            data.setItemLayout(i, point && point.slice() || [NaN, NaN]);\n          }\n        }\n\n        isLargeRender && data.setLayout('symbolPoints', points);\n      }\n\n      return dimLen && {\n        progress: progress\n      };\n    }\n  };\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar samplers = {\n  average: function average(frame) {\n    var sum = 0;\n    var count = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      if (!isNaN(frame[i])) {\n        sum += frame[i];\n        count++;\n      }\n    } // Return NaN if count is 0\n\n\n    return count === 0 ? NaN : sum / count;\n  },\n  sum: function sum(frame) {\n    var sum = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      // Ignore NaN\n      sum += frame[i] || 0;\n    }\n\n    return sum;\n  },\n  max: function max(frame) {\n    var max = -Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] > max && (max = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(max) ? max : NaN;\n  },\n  min: function min(frame) {\n    var min = Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] < min && (min = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(min) ? min : NaN;\n  },\n  // TODO\n  // Median\n  nearest: function nearest(frame) {\n    return frame[0];\n  }\n};\n\nvar indexSampler = function indexSampler(frame, value) {\n  return Math.round(frame.length / 2);\n};\n\nfunction _default(seriesType) {\n  return {\n    seriesType: seriesType,\n    modifyOutputEnd: true,\n    reset: function reset(seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var sampling = seriesModel.get('sampling');\n      var coordSys = seriesModel.coordinateSystem; // Only cartesian2d support down sampling\n\n      if (coordSys.type === 'cartesian2d' && sampling) {\n        var baseAxis = coordSys.getBaseAxis();\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\n        var extent = baseAxis.getExtent(); // Coordinste system has been resized\n\n        var size = extent[1] - extent[0];\n        var rate = Math.round(data.count() / size);\n\n        if (rate > 1) {\n          var sampler;\n\n          if (typeof sampling === 'string') {\n            sampler = samplers[sampling];\n          } else if (typeof sampling === 'function') {\n            sampler = sampling;\n          }\n\n          if (sampler) {\n            // Only support sample the first dim mapped from value axis.\n            seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\n          }\n        }\n      }\n    }\n  };\n}\n\nmodule.exports = _default;"],"sourceRoot":""}